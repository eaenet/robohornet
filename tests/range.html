<!DOCTYPE html>
<html>
  <head>
    <title>DOM Range API</title>
    <script>

      var RANGE;
      var TIMES = 1e5;
      var NODES = 1e3;
      var HTML = (function() {
        var txt = 'Cupcake ipsum dolor sit amet icing carrot cake gummi bears jelly. Sugar plum sesame snaps candy canes.';
        var s = '';
        for (var i = 0; i < NODES; i++) {
          s += '<p id=node' +  i + '>' + txt + '</p>';
        }
        return s;
      })();

      function setUp() {
        reset();
      }
      function tearDown() {}
      function reset() {
        document.body.innerHTML = HTML;
      }
      function test(mode) {
        mode = mode || "selectNodeContents";
        var fn = "test_" + mode;
        window[fn]();
      }

      function test_createRange() {
        for (var i = 0; i < TIMES; i++) {
          var r = document.createRange();
        }
      }

      function test_selectNode() {
        var node = document.getElementById('node876');
        var r = document.createRange();
        for (var i = 0; i < TIMES; i++) {
          r.selectNode(node);
        }
      }

      function test_selectNodeContents() {
        var node = document.getElementById('node876');
        var r = document.createRange();
        for (var i = 0; i < TIMES; i++) {
          r.selectNodeContents(node);
        }
      }

    </script>
  </head>
  <body></body>
  <script src="../test.js"></script>
</html>
