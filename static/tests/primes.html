<!DOCTYPE html>
<html>
<head>
<title>Calculate a list of primes from 0 to n</title>
<style>
</style>
</head>
<body>
<script>

    var result;
    var num;
    var DEFAULT_NUM = 1000000;

    function setUp(opt_numPrimes)
    {
        num = opt_numPrimes || DEFAULT_NUM;
    }

    function reset() {

    }

    function tearDown()
    {

    }

    function test()
    {
        if (num < 2) {
            return [];
        } else if (num == 2) {
            return [2];
        }
        var flags = [], primes = [];
        for (var i = 2; i <= num; i++) {
            if (flags[i]) {
                for (var j = 0; j < flags[i].length; j++) {
                    var prime = flags[i][j];
                    if (flags[prime + i]) {
                        flags[prime + i].push(prime);
                    } else {
                        flags[prime + i] = [prime];
                    }
                }
                delete flags[i];
            } else {
                primes.push(i);
                if ((i * i) < num) {
                    flags[i * i] = [i];
                }
            }
        }
    }
</script>
<script src="../test.js"></script>
</body>
</html>
